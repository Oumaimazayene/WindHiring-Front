<div class="row justify-content-center">
  <div class="col-lg-6 align-items-center">
    <div class="card bg-secondary shadow border-0 mt-7">
      <div class="card-header bg-transparent pb-5">
        <div class="text-muted text-center">
          <h1 style="color: #1c1c2b">Changer votre mot de passe</h1>
          <h3>"sécurisez votre accès avec un mot de passe robuste"</h3>
        </div>
      </div>
      <div class="card-body px-lg-5 py-lg-5">
        <form (ngSubmit)="changePassword()" [formGroup]="form" role="form">
          <div class="form-group mb-3">
            <div class="input-group input-group-alternative">
              <div class="input-group-prepend">
                <span class="input-group-text"
                  ><i class="ni ni-email-83"></i
                ></span>
              </div>
              <input
                class="form-control"
                formControlName="email"
                type="text"
                aria-label="email"
              />
            </div>
          </div>
          <!-- Champ Ancien mot de passe -->
          <div class="form-group mb-3">
            <div class="input-group input-group-alternative">
              <div class="input-group-prepend">
                <span class="input-group-text"
                  ><i class="ni ni-lock-circle-open"></i
                ></span>
              </div>
              <input
                class="form-control"
                formControlName="oldPassword"
                placeholder="Ancien mot de passe"
                type="password"
                aria-label="Ancien mot de passe"
              />
              <div class="input-group-append">
                <button
                  class="btn btn-outline-secondary"
                  type="button"
                  (click)="togglePasswordVisibility('oldPassword')"
                >
                  <i
                    class="fa"
                    [ngClass]="{
                      'fa-eye': showPassword,
                      'fa-eye-slash': !showPassword
                    }"
                  ></i>
                </button>
              </div>
            </div>
          </div>

          <div class="form-group">
            <div class="input-group input-group-alternative">
              <div class="input-group-prepend">
                <span class="input-group-text"
                  ><i class="ni ni-lock-circle-open"></i
                ></span>
              </div>
              <input
                class="form-control"
                formControlName="newPassword"
                placeholder="Nouveau mot de passe"
                type="password"
                aria-label="Nouveau mot de passe"
              />
              <div class="input-group-append">
                <button
                  class="btn btn-outline-secondary"
                  type="button"
                  (click)="togglePasswordVisibility('newPassword')"
                >
                  <i
                    class="fa"
                    [ngClass]="{
                      'fa-eye': showPassword,
                      'fa-eye-slash': !showPassword
                    }"
                  ></i>
                </button>
              </div>
            </div>
          </div>
          <div *ngIf="errorMessage" class="text-danger">
            {{ errorMessage }}
          </div>
          <div class="text-center mt-3">
            <button
              class="md:w-full rounded-full button-yellow col-lg-10"
              type="submit"
              [disabled]="form.invalid || form.pristine"
            >
              <span>Changer le mot de passe</span>
            </button>
          </div>
          <div
            class="row justify-content-center mt-4"
            *ngIf="form.invalid && (form.dirty || form.touched)"
          >
            <div class="col-lg-12">
              <div class="text-danger" role="alert">
                Veuillez remplir tous les champs correctement.
              </div>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
